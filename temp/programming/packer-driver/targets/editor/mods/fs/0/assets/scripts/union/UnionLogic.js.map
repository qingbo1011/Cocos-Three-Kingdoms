{"version":3,"sources":["file:///D:/git/github/mszlu/games/slg/ms-sg/assets/scripts/union/UnionLogic.ts"],"names":["_decorator","Component","Node","Label","MapCommand","EventMgr","ccclass","property","UnionLogic","onLoad","visibleView","on","openMyUnion","exit","onClickClose","onDestroy","targetOff","console","log","node","active","onClickMember","memberNode","mainNode","onClickApply","applyNode","onClickLog","logNode","openCreate","createNode","lobbyNode","onEnable","city","getInstance","cityProxy","getMyMainCity","unionId","onDisable","back"],"mappings":"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","sourcesContent":["// // Learn TypeScript:\n// //  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// // Learn Attribute:\n// //  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// // Learn life-cycle callbacks:\n// //  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { _decorator, Component, Node, Label } from 'cc';\nconst { ccclass, property } = _decorator;\n\nimport { MapCityData } from \"../map/MapCityProxy\";\nimport MapCommand from \"../map/MapCommand\";\nimport { EventMgr } from '../utils/EventMgr';\n\n@ccclass('UnionLogic')\nexport default class UnionLogic extends Component {\n    @property(Node)\n    createNode:Node | null = null;\n    @property(Node)\n    mainNode:Node | null = null;\n    @property(Node)\n    lobbyNode:Node | null = null;\n    @property(Node)\n    memberNode:Node | null = null;\n    @property(Node)\n    applyNode:Node | null = null;\n    \n    @property(Node)\n    logNode:Node | null = null;\n    @property(Label)\n    nameLab:Label | null = null;\n    protected onLoad():void{\n        this.visibleView();\n        EventMgr.on(\"open_my_union\",this.openMyUnion,this);\n        EventMgr.on(\"dismiss_union_success\",this.exit,this);\n        EventMgr.on(\"close_union\",this.onClickClose,this);\n        EventMgr.on(\"create_union_success\",this.openMyUnion,this);\n    }\n    protected onDestroy():void{\n        EventMgr.targetOff(this);\n    }\n    protected onClickClose(): void {\n        console.log(\"onClickClose\");\n        this.node.active = false;\n    }\n    protected onClickMember(): void {\n        this.memberNode.active = true;\n        this.mainNode.active = false;\n    }\n    protected onClickApply(): void {\n        this.mainNode.active = false;\n        this.applyNode.active = true;\n    }\n    protected onClickLog(): void {\n        this.mainNode.active = false;\n        this.logNode.active = true;\n    }\n    protected openCreate():void{\n        this.createNode.active = true;\n    }\n    protected visibleView():void{\n        this.memberNode.active =\n        this.createNode.active =\n        this.lobbyNode.active =\n        this.applyNode.active =\n        this.memberNode.active =\n        this.logNode.active = false;\n    }\n    protected openMyUnion():void{\n        this.visibleView();\n        this.mainNode.active = true\n    }\n    protected onEnable():void{\n\n        let city:MapCityData = MapCommand.getInstance().cityProxy.getMyMainCity();\n        if(city.unionId > 0){\n        this.openMyUnion();\n        }else{\n        this.mainNode.active = false;\n        this.lobbyNode.active = true;\n        }\n    }\n    protected onDisable():void{\n        this.visibleView();\n    }\n    protected back():void{\n        this.openMyUnion();\n    }\n    protected exit():void{\n        this.visibleView();\n        this.lobbyNode.active = true\n    }\n}\n\n"]}