{"version":3,"sources":["file:///D:/git/github/mszlu/games/slg/ms-sg/assets/scripts/union/UnionItemLogic.ts"],"names":["_decorator","Component","Label","Node","UnionCommand","EventMgr","ccclass","property","UnionItemLogic","onLoad","joinButtonNode","active","updateItem","data","_unionData","nameLabel","string","name","isCanJoin","getInstance","proxy","isMeInUnion","join","unionJoin","id","click","isCanjoin","emit"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;;AAEhCC,MAAAA,Y;;AAEEC,MAAAA,Q,iBAAAA,Q;;;;;;;OAHH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;yBAMTQ,c,WADpBF,OAAO,CAAC,gBAAD,C,UAEHC,QAAQ,CAACL,KAAD,C,UAERK,QAAQ,CAACJ,IAAD,C,oCAJb,MACqBK,cADrB,SAC4CP,SAD5C,CACsD;AAAA;AAAA;;AAAA;;AAAA;;AAAA,8CAKrB,IALqB;AAAA;;AAMxCQ,QAAAA,MAAM,GAAO;AACnB,eAAKC,cAAL,CAAoBC,MAApB,GAA6B,KAA7B;AACH;;AACSC,QAAAA,UAAU,CAACC,IAAD,EAAiB;AACjC,eAAKC,UAAL,GAAkBD,IAAlB;AACA,eAAKE,SAAL,CAAeC,MAAf,GAAwB,KAAKF,UAAL,CAAgBG,IAAxC;AACA,eAAKP,cAAL,CAAoBC,MAApB,GAA6B,KAAKO,SAAL,EAA7B;AAGH;;AACSA,QAAAA,SAAS,GAAU;AACzB,iBAAO,CAAC;AAAA;AAAA,4CAAaC,WAAb,GAA2BC,KAA3B,CAAiCC,WAAjC,EAAR;AACH;;AACSC,QAAAA,IAAI,GAAO;AACjB;AAAA;AAAA,4CAAaH,WAAb,GAA2BI,SAA3B,CAAqC,KAAKT,UAAL,CAAgBU,EAArD;AACH;;AACSC,QAAAA,KAAK,GAAO;AAClB,cAAIC,SAAiB,GAAG,KAAKR,SAAL,EAAxB;;AACA,cAAG,CAACQ,SAAJ,EAAc;AACV;AAAA;AAAA,sCAASC,IAAT,CAAc,eAAd,EAA8B,KAAKb,UAAnC;AACH;AACJ;;AA3BiD,O;;;;;iBAExB,I;;;;;;;iBAEI,I","sourcesContent":["import { _decorator, Component, Label, Node } from 'cc';\nconst { ccclass, property } = _decorator;\nimport UnionCommand from \"./UnionCommand\";\nimport { Union } from \"./UnionProxy\";\nimport { EventMgr } from '../utils/EventMgr';\n\n@ccclass('UnionItemLogic')\nexport default class UnionItemLogic extends Component {\n    @property(Label)\n    nameLabel: Label | null = null;\n    @property(Node)\n    joinButtonNode: Node | null = null;\n    protected _unionData:Union = null;\n    protected onLoad():void{\n        this.joinButtonNode.active = false;\n    }\n    protected updateItem(data:Union):void{\n        this._unionData = data;\n        this.nameLabel.string = this._unionData.name;\n        this.joinButtonNode.active = this.isCanJoin();\n\n\n    }\n    protected isCanJoin():boolean{\n        return !UnionCommand.getInstance().proxy.isMeInUnion();\n    }\n    protected join():void{\n        UnionCommand.getInstance().unionJoin(this._unionData.id)\n    }\n    protected click():void{\n        var isCanjoin:boolean = this.isCanJoin();\n        if(!isCanjoin){\n            EventMgr.emit(\"open_my_union\",this._unionData)\n        }\n    }\n}\n"]}