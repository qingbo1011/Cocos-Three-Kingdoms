{"version":3,"sources":["file:///D:/git/github/mszlu/games/slg/ms-sg/assets/scripts/union/UnionLogLogic.ts"],"names":["_decorator","Component","ScrollView","UnionCommand","MapCommand","EventMgr","ccclass","property","UnionLogLogic","onLoad","on","updateLog","onDestroy","targetOff","data","comp","logView","node","getComponent","setData","getLog","city","getInstance","cityProxy","getMyMainCity","unionData","proxy","getUnion","unionId","isMajor","rid","unionLog","onEnable","console","log"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,U,OAAAA,U;;AAGzBC,MAAAA,Y;;AAGAC,MAAAA,U;;AACEC,MAAAA,Q,iBAAAA,Q;;;;;;;OANH;AAACC,QAAAA,OAAD;AAAUC,QAAAA;AAAV,O,GAAsBP,U;;yBASPQ,a,WADpBF,OAAO,CAAC,eAAD,C,UAEHC,QAAQ,CAACL,UAAD,C,oCAFb,MACqBM,aADrB,SAC2CP,SAD3C,CACqD;AAAA;AAAA;;AAAA;AAAA;;AAGvCQ,QAAAA,MAAM,GAAO;AACnB;AAAA;AAAA,oCAASC,EAAT,CAAY,WAAZ,EAAwB,KAAKC,SAA7B,EAAuC,IAAvC;AACH;;AAESC,QAAAA,SAAS,GAAO;AACtB;AAAA;AAAA,oCAASC,SAAT,CAAmB,IAAnB;AACH;;AACSF,QAAAA,SAAS,CAACG,IAAD,EAAY;AAE3B,cAAIC,IAAI,GAAG,KAAKC,OAAL,CAAaC,IAAb,CAAkBC,YAAlB,CAA+B,WAA/B,CAAX;AACAH,UAAAA,IAAI,CAACI,OAAL,CAAaL,IAAI,GAACA,IAAD,GAAM,EAAvB;AACH;;AACSM,QAAAA,MAAM,GAAO;AACnB,cAAIC,IAAgB,GAAG;AAAA;AAAA,wCAAWC,WAAX,GAAyBC,SAAzB,CAAmCC,aAAnC,EAAvB;AACA,cAAIC,SAAe,GAAG;AAAA;AAAA,4CAAaH,WAAb,GAA2BI,KAA3B,CAAiCC,QAAjC,CAA0CN,IAAI,CAACO,OAA/C,CAAtB;;AACA,cAAGH,SAAS,CAACI,OAAV,CAAkBR,IAAI,CAACS,GAAvB,CAAH,EAA+B;AAC/B;AAAA;AAAA,8CAAaR,WAAb,GAA2BS,QAA3B;AACC;AACJ;;AACSC,QAAAA,QAAQ,GAAO;AACrBC,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,eAAKd,MAAL;AACH;;AAzBgD,O;;;;;iBAErB,I","sourcesContent":["// // Learn TypeScript:\n// //  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// // Learn Attribute:\n// //  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// // Learn life-cycle callbacks:\n// //  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { _decorator, Component, ScrollView } from 'cc';\nconst {ccclass, property} = _decorator;\n\nimport UnionCommand from \"./UnionCommand\";\nimport { Union } from \"./UnionProxy\";\nimport { MapCityData } from \"../map/MapCityProxy\";\nimport MapCommand from \"../map/MapCommand\";\nimport { EventMgr } from '../utils/EventMgr';\n\n@ccclass('UnionLogLogic')\nexport default class UnionLogLogic extends Component {\n    @property(ScrollView)\n    logView:ScrollView | null = null;\n    protected onLoad():void{\n        EventMgr.on(\"union_log\",this.updateLog,this);\n    }\n    \n    protected onDestroy():void{\n        EventMgr.targetOff(this);\n    }\n    protected updateLog(data:any[]){\n\n        var comp = this.logView.node.getComponent(\"ListLogic\");\n        comp.setData(data?data:[]);\n    }\n    protected getLog():void{\n        let city:MapCityData = MapCommand.getInstance().cityProxy.getMyMainCity();\n        let unionData:Union = UnionCommand.getInstance().proxy.getUnion(city.unionId);\n        if(unionData.isMajor(city.rid)){\n        UnionCommand.getInstance().unionLog();\n        }\n    }\n    protected onEnable():void{\n        console.log(\"getLog\");\n        this.getLog()\n    }\n}\n\n"]}