{"version":3,"sources":["file:///D:/git/github/mszlu/games/slg/ms-sg/assets/scripts/map/ui/GeneralRosterListLogic.ts"],"names":["_decorator","Component","ScrollView","GeneralCommand","EventMgr","ccclass","property","GeneralRosterListLogic","onEnable","initGeneralCfg","onClickClose","node","active","emit","cfgs","getInstance","proxy","getGeneralAllCfg","arr","Array","from","values","sort","sortStar","comp","scrollView","getComponent","setData","a","b","star","cfgId"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,U,OAAAA,U;;AAGzBC,MAAAA,c;;AAEEC,MAAAA,Q,iBAAAA,Q;;;;;;;OAJH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;yBAOTO,sB,WADpBF,OAAO,CAAC,wBAAD,C,UAIHC,QAAQ,CAACJ,UAAD,C,oCAJb,MACqBK,sBADrB,SACoDN,SADpD,CAC8D;AAAA;AAAA;;AAAA;AAAA;;AAMhDO,QAAAA,QAAQ,GAAS;AACvB,eAAKC,cAAL;AACH;;AAESC,QAAAA,YAAY,GAAS;AAC3B,eAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACA;AAAA;AAAA,oCAASC,IAAT,CAAc,cAAd;AACH;;AAGSJ,QAAAA,cAAc,GAAO;AAE3B,cAAIK,IAAI,GAAG;AAAA;AAAA,gDAAeC,WAAf,GAA6BC,KAA7B,CAAmCC,gBAAnC,EAAX;AACA,cAAIC,GAAG,GAAGC,KAAK,CAACC,IAAN,CAAWN,IAAI,CAACO,MAAL,EAAX,CAAV;AACAH,UAAAA,GAAG,CAACI,IAAJ,CAAS,KAAKC,QAAd;AAEA,cAAIC,IAAI,GAAG,KAAKC,UAAL,CAAgBd,IAAhB,CAAqBe,YAArB,CAAkC,WAAlC,CAAX;AACAF,UAAAA,IAAI,CAACG,OAAL,CAAaT,GAAb;AAEH;;AAESK,QAAAA,QAAQ,CAACK,CAAD,EAAmBC,CAAnB,EAA6C;AAE3D,cAAGD,CAAC,CAACE,IAAF,GAASD,CAAC,CAACC,IAAd,EAAmB;AACf,mBAAO,CAAP;AACH,WAFD,MAEM,IAAGF,CAAC,CAACE,IAAF,IAAUD,CAAC,CAACC,IAAf,EAAoB;AACtB,mBAAOF,CAAC,CAACG,KAAF,GAAUF,CAAC,CAACE,KAAnB;AACH,WAFK,MAED;AACD,mBAAO,CAAC,CAAR;AACH;AACJ;;AApCyD,O;;;;;iBAIlC,I","sourcesContent":["\nimport { _decorator, Component, ScrollView } from 'cc';\nconst { ccclass, property } = _decorator;\n\nimport GeneralCommand from \"../../general/GeneralCommand\";\nimport { GeneralConfig } from \"../../general/GeneralProxy\";\nimport { EventMgr } from '../../utils/EventMgr';\n\n@ccclass('GeneralRosterListLogic')\nexport default class GeneralRosterListLogic extends Component {\n\n\n    @property(ScrollView)\n    scrollView:ScrollView = null;\n\n    protected onEnable(): void {\n        this.initGeneralCfg();\n    }\n\n    protected onClickClose(): void {\n        this.node.active = false;\n        EventMgr.emit(\"open_general\");\n    }\n\n\n    protected initGeneralCfg():void{\n\n        let cfgs = GeneralCommand.getInstance().proxy.getGeneralAllCfg();\n        var arr = Array.from(cfgs.values());\n        arr.sort(this.sortStar);\n\n        var comp = this.scrollView.node.getComponent(\"ListLogic\");\n        comp.setData(arr);\n\n    }\n\n    protected sortStar(a: GeneralConfig, b: GeneralConfig): number {\n\n        if(a.star < b.star){\n            return 1;\n        }else if(a.star == b.star){\n            return a.cfgId - b.cfgId;\n        }else{\n            return -1;\n        }\n    }\n}\n"]}