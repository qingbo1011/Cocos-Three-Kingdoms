{"version":3,"sources":["file:///D:/git/github/mszlu/games/slg/ms-sg/assets/scripts/common/LoadingLogic.ts"],"names":["_decorator","Component","ProgressBar","EventMgr","ccclass","property","LoadingLogic","onLoad","bar","progress","on","onProgress","onComplete","onDestroy","targetOff","precent","node","parent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;;AACvBC,MAAAA,Q,iBAAAA,Q;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;yBAGTM,Y,WADpBF,OAAO,CAAC,cAAD,C,UAEHC,QAAQ,CAACH,WAAD,C,oCAFb,MACqBI,YADrB,SAC0CL,SAD1C,CACoD;AAAA;AAAA;;AAAA;AAAA;;AAGtCM,QAAAA,MAAM,GAAS;AACrB,eAAKC,GAAL,CAASC,QAAT,GAAoB,CAApB;AACA;AAAA;AAAA,oCAASC,EAAT,CAAY,eAAZ,EAA6B,KAAKC,UAAlC,EAA8C,IAA9C;AACA;AAAA;AAAA,oCAASD,EAAT,CAAY,eAAZ,EAA6B,KAAKE,UAAlC,EAA8C,IAA9C;AACH;;AACSC,QAAAA,SAAS,GAAS;AACxB;AAAA;AAAA,oCAASC,SAAT,CAAmB,IAAnB;AACH;;AACSH,QAAAA,UAAU,CAACI,OAAD,EAAwB;AACxC,eAAKP,GAAL,CAASC,QAAT,GAAoBM,OAApB;AACH;;AACSH,QAAAA,UAAU,GAAS;AACzB,eAAKI,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH;;AAhB+C,O;;;;;iBAEtB,I","sourcesContent":["import { _decorator, Component, ProgressBar } from 'cc';\nimport { EventMgr } from '../utils/EventMgr';\nconst { ccclass, property } = _decorator;\n\n@ccclass('LoadingLogic')\nexport default class LoadingLogic extends Component {\n    @property(ProgressBar)\n    bar: ProgressBar | null = null;\n    protected onLoad(): void {\n        this.bar.progress = 0;\n        EventMgr.on(\"load_progress\", this.onProgress, this);\n        EventMgr.on(\"load_complete\", this.onComplete, this);\n    }\n    protected onDestroy(): void {\n        EventMgr.targetOff(this);\n    }\n    protected onProgress(precent: number): void {\n        this.bar.progress = precent;\n    }\n    protected onComplete(): void {\n        this.node.parent = null;\n    }\n}\n\n\n"]}